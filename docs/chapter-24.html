<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Insight App - Chapter 24</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700&family=Tinos:wght@700&display=swap');
        
        body {
            background-color: #007BFF; /* ビビットなブルー */
            font-family: 'Noto Sans JP', sans-serif;
        }

        /* 英語フォントをTimes New Romanに設定 */
        .font-english {
            font-family: 'Tinos', 'Times New Roman', serif;
            font-weight: 700;
            font-size: 1.25rem; /* 20px */
            line-height: 1.75rem; /* 28px */
        }

        .answer-span {
            color: #DC2626; /* 赤色 */
            font-weight: 700;
            display: none;
        }

        .underline-span {
            text-decoration: underline;
            text-underline-offset: 4px;
            display: inline;
        }

        .show-answer .answer-span {
            display: inline;
        }

        .show-answer .underline-span {
            display: none;
        }
        
        .explanation {
            display: none;
            white-space: pre-wrap;
        }

        /* Button Styles for Modal */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 10px 20px;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s ease-in-out;
        }
        .btn-primary {
            background-color: #3b82f6;
            color: white;
        }
        .btn-primary:hover {
            background-color: #2563eb;
        }
        .btn-secondary {
            background-color: #6b7280;
            color: white;
        }
        .btn-secondary:hover {
            background-color: #4b5563;
        }
    </style>
</head>
<body class="text-gray-800">

    <div id="app-container" class="container mx-auto p-4 md:p-8 max-w-4xl">
        <header class="text-center mb-8 bg-blue-500 p-4 rounded-xl shadow-lg">
            <h1 class="text-2xl md:text-3xl font-bold text-white">Insight 英文法・語法・熟語</h1>
            <h2 id="app-subtitle" class="text-xl md:text-2xl font-bold text-white">学習用サイト（Chapter 24）</h2>
        </header>

        <main class="bg-white/90 backdrop-blur-sm p-6 rounded-xl shadow-lg mb-28">
            <div class="flex justify-between items-center mb-6">
                 <!-- PDF Control Section -->
                 <div class="flex-1 mr-4">
                    <div class="p-4 bg-gray-50 rounded-lg border border-gray-200">
                        <h3 class="font-bold text-sm md:text-base mb-2">選択した問題でPDFを作成</h3>
                        <div class="flex flex-col md:flex-row md:items-center justify-between gap-3">
                            <div class="flex items-center">
                                <input type="checkbox" id="select-all-checkbox" class="h-5 w-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500">
                                <label for="select-all-checkbox" class="ml-2 text-sm font-medium text-gray-700 cursor-pointer">すべて選択 / 解除</label>
                            </div>
                            <button id="open-pdf-modal-btn" class="bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded-lg shadow text-sm transition-transform transform hover:scale-105">
                                PDF作成メニュー
                            </button>
                        </div>
                    </div>
                </div>

                <button id="start-quiz-btn" class="bg-purple-500 hover:bg-purple-600 text-white font-bold py-2 px-4 rounded-lg shadow transition-transform transform hover:scale-105 whitespace-nowrap">
                    ランダムテスト
                </button>
            </div>

            <div id="sentence-list" class="space-y-6">
                <!-- Sentences will be populated by JS -->
            </div>
        </main>
    </div>

    <!-- Control Panel -->
    <div id="control-panel" class="fixed bottom-0 left-0 right-0 bg-white/80 backdrop-blur-md p-4 border-t-2 border-gray-200 shadow-2xl flex justify-center items-center space-x-2 md:space-x-4">
        <button id="toggle-answer-btn" class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-lg shadow-md transition-transform transform hover:scale-105">表示/非表示</button>
        <button id="play-sound-btn" class="bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded-lg shadow-md transition-transform transform hover:scale-105">音声再生</button>
        <button id="record-btn" class="bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-4 rounded-lg shadow-md transition-transform transform hover:scale-105">録音評価</button>
        <button id="toggle-explanation-btn" class="bg-yellow-500 hover:bg-yellow-600 text-white font-bold py-2 px-4 rounded-lg shadow-md transition-transform transform hover:scale-105">解説</button>
    </div>

    <!-- Message/Score Modal -->
    <div id="message-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50">
        <div id="message-content" class="bg-white p-8 rounded-lg shadow-xl text-center">
            <!-- Message content will be populated by JS -->
        </div>
    </div>
    
    <!-- Quiz Modal -->
    <div id="quiz-modal" class="hidden fixed inset-0 bg-black bg-opacity-60 flex justify-center items-center z-40 p-4">
        <div class="bg-white w-full max-w-2xl p-8 rounded-2xl shadow-2xl relative">
            <button id="close-quiz-btn" class="absolute top-4 right-4 text-gray-500 hover:text-gray-800 text-3xl font-bold">&times;</button>
            <div id="quiz-content">
                <!-- Quiz content will be populated by JS -->
            </div>
        </div>
    </div>

    <!-- PDF Download Modal -->
    <div id="pdf-modal" class="hidden fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full flex items-center justify-center z-50">
        <div class="relative mx-auto p-5 border w-11/12 md:w-1/2 lg:w-1/3 shadow-lg rounded-md bg-white">
            <div class="mt-3 text-center">
                <h3 class="text-lg leading-6 font-medium text-gray-900 mb-4">ダウンロードするPDFの種類を選択</h3>
                <div class="mt-2 space-y-3">
                    <button id="download-list-btn" class="btn btn-primary w-full justify-start text-left">1. 完全なリスト (熟語・意味・例文)</button>
                    <button id="download-en-quiz-btn" class="btn btn-primary w-full justify-start text-left">2. 熟語テスト (英語を解答)</button>
                    <button id="download-ja-quiz-btn" class="btn btn-primary w-full justify-start text-left">3. 熟語テスト (意味を解答)</button>
                    <button id="download-mixed-quiz-btn" class="btn btn-primary w-full justify-start text-left">4. 熟語テスト (混合)</button>
                    <button id="download-sentence-quiz-btn" class="btn btn-primary w-full justify-start text-left">5. 例文の穴埋め問題</button>
                    <button id="download-sentence-mixed-quiz-btn" class="btn btn-primary w-full justify-start text-left">6. 例文の混合問題 (穴埋め/和訳)</button>
                </div>
                <div class="mt-6">
                    <button id="close-modal-btn" class="btn btn-secondary w-full">キャンセル</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        const chapterData = [
    {
        "id": "1056",
        "ja": "電車は20分遅れて東京駅に到着した。",
        "en": "The train {arrived at Tokyo Station} 20 minutes late.",
        "answer": "arrived at Tokyo Station",
        "explanation": "▶ at は前置詞で， 「場所の一点，目標点」などの意味を表す。➡Grasp33\narrive at A\nget to A       ʮA ʹ౸ண͢Δʯ⇦ 「場所の一点に （at）到 着 す る（arrive）」\nreach A\narrive in A ʮAͳͲʣʹ౸ண͢Δʯ"
    },
    {
        "id": "1057",
        "ja": "人をじっと見るのは失礼だ。",
        "en": "It is rude to {stare at people}.",
        "answer": "stare at people",
        "explanation": "stare at A ʮAͭΊΔʯ\n⇧ 「視野の中の一点 （at）を じ っ と 見 る（stare）」\nIt is rude to doྱͩʯ"
    },
    {
        "id": "1058",
        "ja": "その政策は CO2排出量の削減をめざしている。",
        "en": "The policy {aims at cutting} down on CO2 emissions.",
        "answer": "aims at cutting",
        "explanation": "aim at A ʮA ΛͶΒ͏ɼA ΛΊ͟͢ʯ⇦ 「一点 （at）を 目 標 と す る（aim）」\npolicyʯ\ncut down on A ʮAΒ͢ʯ＝reduce A\nCO 2 emissionsʮCO2 ഉग़ྔʯ\n〈動詞＋ （副詞／名詞） ＋前置詞〉 で構成される熟語は他動詞の働きをする。前置詞の\nイメージをつかんでおく と熟語の意味が理解しやすく なる。\nGrasp 前置詞を含み，他動詞の働きをする熟語32\nlook for\ntake part in\nlook up to\nlook into\nmake room for\nlook down on\nlook after\ngive way to\nlook forward to\nMom is looking for her key.（母さんは鍵を探している。）\nHe is looking into the murder case.（彼はその殺人事件を調 査している。）\nDad is looking after the baby.（父さんは赤ちゃんの 世 話をしている。）\nHe took part in the meeting.（ 彼 はそのミーティングに参加した。）\nThey made room for me.（彼らは私のために場所を空けてくれた。）\nThe young man gave way to the king.（その若者は王に屈した。）\nShe looks up to him for his courage.（彼女は勇気のある彼を尊 敬している。）\nHe looks down on other people.（彼はほかの人たちを見 下している。）\nIʼm looking forward to seeing her.（彼女に会うのを楽しみ にしている。）\nGrasp atのイメージ／inのイメージ33\nat\n・～に，～で\n・～を目指して\n［場所の一点］\n［時の一点］\n［目標］\nin\n・～の中に\n・～において\n［空間の中］\n［状態の中］\n［分野の中］\narrive / people / cut\n392 393\n復習"
    },
    {
        "id": "1059",
        "ja": "私はその大会で 失 敗して悔しい思いをした。",
        "en": "I felt disappointed because I {failed in} the competition.",
        "answer": "failed in",
        "explanation": "▶ in は前置詞で，空間・状態・分野などの「中」を表す。➡Grasp33– p.393\nfail in A ʮAഊ͢Δʯ\n⇧「A に お い て（in）失 敗 す る（fail）」\nfail to do ʮʙ͠ଛͳ͏ɼʙͰ͖ͳ͍ʯ➡417\nfeel disappointed͍Λ͢Δʯ\ncompetitionձɼίϯΫʔϧʯ"
    },
    {
        "id": "1060",
        "ja": "幸せは小さなことの中にある。",
        "en": "Happiness {lies in} small things.",
        "answer": "lies in",
        "explanation": "lie in AҼɾཧ༝ͳͲ͕ʣA ʹ͋Δʯ＝consist in A\n⇧ 「 （原因や理由が）A の 中 に（in）横 た わ っ て い る（lie）」\nlie には名詞で「うそ」 ，動詞で「うそをつく」という意味もある。➡File70– p.256"
    },
    {
        "id": "1062",
        "ja": "大学ではデータサイエンスを専攻したいです。",
        "en": "I would like to {major in} data science in college.",
        "answer": "major in",
        "explanation": "major in A\nspecialize in A    ʮA͢Δʯ\n⇧「A に お い て（in）専 門 と す る（major/specialize）」\ndata science ʮσʔλαΠΤϯεʯ"
    },
    {
        "id": "1063",
        "ja": "その会社は IT サービスとソフトウェア・ソリューションを取り扱っている。",
        "en": "The company {deals in} IT services and software solutions.",
        "answer": "deals in",
        "explanation": "deal in A ʮAʢ঎඼ͳͲʣΛऔΓѻ͏ɼA Λ঎͏ʯ\n⇧「A に お い て（in）商 い を す る（deal）」deal の活用はdeal—dealt—dealt\ndeal with A  ᶃʮA ʹରॲ͢Δʯᶄ ʮAฑʣΛѻ͏ʯ➡1140\n▶ deal は名詞と して使う と「取引」の意味になる。make a deal「取引する」\nsolutionʯ"
    },
    {
        "id": "1065",
        "ja": "私の妹はしつこく同じ質問をした。",
        "en": "My sister {persisted in asking} the same question.",
        "answer": "persisted in asking",
        "explanation": "persist in doing ʮͭ͘͜͠ʙ ͢Δʯ\n⇧「 ～ す る こ と に お い て（in doing）ね ば る（persist）」\npersist in A ʮA͢Δʯ\nlie / ghost / major / business / become / ask\n394 395\nSelf\nCheck\n復習"
    },
    {
        "id": "1066",
        "ja": "その男性は電車に乗るところだ。",
        "en": "The man is {getting on the train}.",
        "answer": "getting on the train",
        "explanation": "▶ on は前置詞で， 「～に接して，～の上に」などの意味を表す。➡Grasp34\nget on A ʮAʢ৐Γ෺ʣʹ৐Δʯ⇦「A の 上 に（on）乗 る 」\n⇔ get off AʮAΓΔʯ\nget in [into] AʮAΉɼAʣʹೖΔʯ\n⇔⇔ get out of AʮAΓΔɼAʣ͔Βग़Δʯ\nget on the train ʮిंʹ৐Δʯ⇔⇔ get oﬀ the trainΓΔʯ"
    },
    {
        "id": "1067-1",
        "ja": "いつでも私 を 頼りにしてください。",
        "en": "You can always {count on me}.",
        "answer": "count on me",
        "explanation": "count on AʮA Λ౰ͯʹ͢ΔɼA Λ པ Γ ʹ ͢ Δʢ＝rely on A ＝depend on Aʣʯ\n⇧「A を支えとして （on）数 に 入 れ る（count）」\n▶ count on は「 （確信や期待を持って） ～に頼る」の意味。"
    },
    {
        "id": "1067-2",
        "ja": "私たちは日常生活でコンピューターに大きく依存している。",
        "en": "We {rely heavily on computers} in our daily lives.",
        "answer": "rely heavily on computers",
        "explanation": "rely on A ʮA ʹཔΔɼA ʹґଘ͢Δʯ＝depend on A\n⇧「A を支えとして （on）頼 る（rely）」\n▶ rely on は「（信頼して）～に頼る，（必要があって）～に依存する」の意味。\nheavily͘͠ɼେ͖͘ʯ⇔⇔ lightly͘ʯ\ndaily lifeʯ"
    },
    {
        "id": "1067-3",
        "ja": "私たちは AIに頼り過ぎてはいけない。",
        "en": "We should not {depend too much on} AI.",
        "answer": "depend too much on",
        "explanation": "depend on A\nᶃʮA ʹཔΔɼA ʹ ґ ଘ ͢ Δʢ＝rely on AͳͲ͕ʣA·Δʯ\n⇧「A を支えとして （on）頼 る（depend）」\n▶ depend on は「（援助などを）～に頼る，（自立性を欠いて）～に依存する」の意味。\nbe dependent on A ʮA ʹґ ଘ͍ͯ͠Δʯ⇔⇔ be independent of A  ➡926"
    },
    {
        "id": "1067-4",
        "ja": "成功は勤勉さと決断力にかかっている。",
        "en": "Success {depends [rests] on} hard work and determination.",
        "answer": "depends [rests] on",
        "explanation": "▶ この問題文のdepend on は「（成功などが）～によって決まる」の意味。➡1067-3\nrest on A\nᶃʮA· Δʢ＝depend on Aʣʯ ᶄʮAͮ ͘ʢ＝be based on Aʣʯ\nhard workʯ\ndeterminationஅྗʯ\ncount / rely / depend\nGrasp onのイメージ34\non\n・～に接して\n・～の上に\n・～に乗って\n・～を支えとして\n・～に関して\n396 397\nSelf\nCheck\n復習"
    },
    {
        "id": "1068",
        "ja": "将来，年金だけで生活するのは 難しくなるだろう。",
        "en": "It will be difficult to {live on} a pension alone in the future.",
        "answer": "live on",
        "explanation": "live on A  ᶃʮA Λৗ৯ͱ͢Δʯᶄ ʮA͠ ͍ͯ͘ʯ\n⇧「A と 接 し て（on）生 きる（live） 」「A を支えとして （on）生 活 す る（live）」\npension  ʯ ᶄʮԼ॓԰ ʢখϗςϧʣʯ\nA aloneʮA ͚ͩʯ\nIt will be diﬃcult to do ʮʙ͢Δͷ͸೉͘͠ͳΔͩΖ͏ʯ"
    },
    {
        "id": "1069",
        "ja": "彼らは一緒に読書会を始めるこ とを思いついた。",
        "en": "They {hit on the idea} of starting a book club together.",
        "answer": "hit on the idea",
        "explanation": "hit on A ʮA͍ͭ͘ʯ＝come up with A\n⇧「 い い アイ デ ア に 接 し て（on）ぶ つ か る（hit）」\n▶ hit 「打つ，ぶつかる」の活用形はhit—hit—hit"
    },
    {
        "id": "1070",
        "ja": "チームミーティングの日程を決める必要がある。",
        "en": "We need to {decide on a date} for the team meeting.",
        "answer": "decide on a date",
        "explanation": "decide on Aͷத͔ΒʣAΊΔʯ\n⇧「A に つ い て（on）決 め る（decide）」\ndecide to doΊΔʯ＝make up one’s mind to do  ➡488\ndate  ᶃʮ೔෇ʯ ᶄʮσʔτʯ"
    },
    {
        "id": "1071",
        "ja": "私の弟は自分の部屋を持ちたがっている。",
        "en": "My brother {insists on having} his own room.",
        "answer": "insists on having",
        "explanation": "insist on A ʮA Λओு͢Δʯ\n⇧「A に つ い て（on）主 張 す る（insist）」"
    },
    {
        "id": "1072",
        "ja": "音楽を聴きながら勉強に集中するのは難しい。",
        "en": "I find it hard to {concentrate on studying} while listening to music.",
        "answer": "concentrate on studying",
        "explanation": "concentrate on A [doing]ʮA ʹ ʦʙ͢Δ͜ͱʹʧ ूத͢Δʯ\n⇧「A に 接 触 し て（on）集 中 す る（concentrate）」\nconcentrate A on BʮAʢ஫ҙͳͲʣΛB ʹूதͤ͞Δʯ＝focus A on B\n/f_ind it hard to do ʮʙ͢Δͷ͸೉͍͠ͱΘ͔Δʯ"
    },
    {
        "id": "1073",
        "ja": "私の家族は正月に祖父母を訪ねる。",
        "en": "My family {calls on my grandparents} during the New Year holidays.",
        "answer": "calls on my grandparents",
        "explanation": "call on A ʮAʢਓʣΛ๚ͶΔʯ＝visit A ＝pay a visit to A\n⇧「 人 を 呼 ん で（call）接 触 し て（on）」\nduring the New Year holidaysʹʯ"
    },
    {
        "id": "1075",
        "ja": "⇧「 降 り て（drop）中 に 入 っ て（in）A に 接 触 し て（on）」 drop in ＝drop by ＝stop byΔʯ―by は副詞で「そばに」の意味。 政府は教育にもっとお金を費やすべきだ。",
        "en": "The government should spend more money on education.",
        "answer": "???",
        "explanation": "spend A on BʮA ΛB ʹඅ΍͢ʯ\n⇧「B に（on）A を 費 や す（spend）」\neducationҭʯ\non / hit / insist / call / drop\n398 399\nSelf\nCheck\n復習"
    },
    {
        "id": "1076",
        "ja": "発展 私は自分の見解を他の人に押しつけたくない 。",
        "en": "I don’t want to {impose my views on others}.",
        "answer": "impose my views on others",
        "explanation": "impose A on BʮA ΛB ʹ՝͢ɼA ΛB ʹԡ͚ͭ͠Δʯ\n⇧「B の 上 に（on）A を 課 す ［ 押 し つ け る ］（impose）」\nview  ᶃʮʢ͋Δ৔ॴ͔ΒͷʣோΊʯᶄ「ղʯ"
    },
    {
        "id": "1077",
        "ja": "発展 卒業おめでとうございます。",
        "en": "I’d like to {congratulate you on your graduation}.",
        "answer": "congratulate you on your graduation",
        "explanation": "congratulate A on BʮB ͷ͜ͱͰAʢਓʣΛॕ෱͢Δʯ\n⇧「B の 事 柄 に 接 し て（on）A を 祝 福 す る（congratulate）」\nCongratulations on A! ʮA Λ ͓ Ί Ͱ ͱ͏ʂʯ"
    },
    {
        "id": "1078",
        "ja": "私たちはコロナ禍を経験した。",
        "en": "We {went through} the COVID-19 pandemic.",
        "answer": "went through",
        "explanation": "go through A\nᶃʮA Λ௨Γൈ͚Δʯ\nᶄʮA͢ Δʢ＝experience A ＝undergo Aʣʯ\n⇧「A を通って／抜けて （through）行 く（go）」 ―through は前置詞  ➡Grasp35\nthe COVID-19 pandemic ʮίϩφՒʯ\n▼1079～1081ʴfrom Aʫ"
    },
    {
        "id": "1079",
        "ja": "最近，ケイ トから連絡はありましたか。",
        "en": "Have you {heard from} Kate lately?",
        "answer": "heard from",
        "explanation": "▶ from は前置詞で， 「～から」という起点や距離などを表す。➡Grasp35\nhear from A ʮA ͔ΒศΓ͕͋ΔɼA ͔Βి࿩Λ΋Β͏ʯ\n⇧「A か ら（from）聞 こ え る（hear）」\nhear of A ʮAʹ͢ΔɼA ͷ͏Θ͞Λฉ͘ʯ➡1130"
    },
    {
        "id": "1080",
        "ja": "その国では，何百万もの人々が貧 困に苦しんでいる。",
        "en": "Millions of people are {suﬀering from poverty} in that country.",
        "answer": "suﬀering from poverty",
        "explanation": "suffer from A ʮA͠Ήʯ\n⇧「A が 起 点 と な っ て（from）苦 し む（suffer）」\ndie from A ＝die of AʮA͵ʯ➡1135\nmillions of A  ᶃʮԿඦສ΋ͷAʯ ᶄʮͱͯ΋ଟ͘ͷAʯ\npovertyʯ⇔⇔ wealthʮ෋ɼ๛͔͞ʯ"
    },
    {
        "id": "1081",
        "ja": "その件についてのコメントは差し控えたいと思います。",
        "en": "I would like to {refrain from} commenting on that.",
        "answer": "refrain from",
        "explanation": "refrain from A [doing]ʮA͑Δʯ\n⇧「A か ら 離 れ て（from）差 し 控 え る（refrain）」\ncomment  ʮ࿦ධ͢Δɼίϝϯτ͢Δʯ\nview / on / others / graduation / go / poverty\nGrasp throughのイメージ／fromのイメージ35\nthrough\n・～を通り抜けて\n・～の間ずっと\nfrom\n・～から\n［起点］\n［隔たり］\n［距離］\n400 401\nSelf\nCheck\n復習"
    },
    {
        "id": "1082",
        "ja": "祖母は時々私に手紙をくれる。",
        "en": "My grandmother sometimes {writes to me}.",
        "answer": "writes to me",
        "explanation": "▶ to は前置詞で，到達点「～へ」や方向「～の方へ 」などを表す。➡Grasp36\nwrite to A ʮAΛॻ͘ʯ⇦「 ～ へ（to）手 紙 を 書 く（write）」\nwrite down A / write A down ʮA Λॻ͖ཹΊΔʯ➡973"
    },
    {
        "id": "1083",
        "ja": "助けが必要なときは，友達に助けを求めればいい。",
        "en": "When you need help, you can {turn to} your friends.",
        "answer": "turn to",
        "explanation": "turn to A  ᶃʮA͘ʯ ᶄʮAΊ Δʢ＝ask A for helpʣʯ\n⇧「A の 方 に（to）向 く（turn）」\nturn A into BʮA ΛB ʹม͑Δʯ＝change A into B  ➡530"
    },
    {
        "id": "1084",
        "ja": "校則は守らなければならない。",
        "en": "We must {keep to} the school rules.",
        "answer": "keep to",
        "explanation": "keep to A\nᶃʮA ʹԊͬͯਐΉʯᶄ「Aըʣʹ ै ͏ʢ＝obey A ＝follow Aʣʯ\n⇧「A の 方 に（to）保 つ(keep)」\nKeep to the left.（左側通行。 ）\nschool rulesଇʯ＝school regulations"
    },
    {
        "id": "1085",
        "ja": "彼らはようやく合意に達した。",
        "en": "They have finally {come to an agreement}.",
        "answer": "come to an agreement",
        "explanation": "come to A ʮA ʹୡ͢Δʯ⇦「A の 方 へ（to）来 る（come）」＝reach A\ncome to͕໭Δʯ＝regain [recover] consciousness\ncome to do ʮʙ͢ΔΑ͏ʹͳΔʯ➡504\ncome to an agreementҙʹୡ͢Δʯ"
    },
    {
        "id": "1086",
        "ja": "現在，私の貯金は全部で20 万円ある。",
        "en": "My savings currently {amount to} 200,000 yen.",
        "answer": "amount to",
        "explanation": "amount to AܭA ʹͳΔʯ＝total A\n⇧ 「総計がA に（to）達 す る（amount）」\n▶ このamount は「総計に達する」という意味の動詞。\nthe amount of ʴ数えられない名詞ʮʙͷྔʯ➡715  ―このamount は「量」 。\ncurrently͸ʯ＝at the present time ＝at present"
    },
    {
        "id": "1087",
        "ja": "先生は異文化を理解するこ との難しさに言及した。",
        "en": "The teacher {referred to} difficulties in understanding other cultures.",
        "answer": "referred to",
        "explanation": "refer to A\nᶃʮA͢ Δʢ＝mention Aʣʯ ᶄʮAর ͢ Δʢ＝consult Aʣʯ\nrefer to A as B ʮA ΛBͿʯ＝call A B\ndiﬃculty in doing ʮʙ͢Δ͜ͱͷ೉͠͞ʯ\nturn / keep / come / agreement / amount\nGrasp toのイメージ36\nto\n・～へ\n［到達点］\n・～の方へ\n［方向］\n402 403\nSelf\nCheck\n復習"
    },
    {
        "id": "1088",
        "ja": "私たちはあなた方の提案に同意します。",
        "en": "We {agree to your proposal}.",
        "answer": "agree to your proposal",
        "explanation": "agree to A\nconsent to A    ʮAըʣʹಉҙ͢Δʯ―A に「人」はこない。\nagree (that) …ʮ…ͱ͍͏͜ͱʹಉҙ͢Δʯ\nagree with A ʮA ੒͢Δʯ＝go along with A  ➡1136-1\nproposal ʮఏҊʯ＝suggestion"
    },
    {
        "id": "1089",
        "ja": "ボランティ アは地域社会の福祉に貢献している。",
        "en": "Volunteers {contribute to} the community’s well-being.",
        "answer": "contribute to",
        "explanation": "contribute to A ʮA͢Δʯ⇦「A に（to）貢 献 す る（contribute）」\ncontribution (to A)ʮʢAʯ\nwell-beingʯ"
    },
    {
        "id": "1090",
        "ja": "彼の音楽は多くの国の人々に訴えかける。",
        "en": "His music {appeals to people} from many countries.",
        "answer": "appeals to people",
        "explanation": "appeal to A ʮAʢͷ৺ʣʹૌ͑Δʯ\n⇧「A の 心 に（to）訴 え る（appeal）」"
    },
    {
        "id": "1091",
        "ja": "世界の指導者たちは，紛争を解決するための暴力に訴えるべきではない。",
        "en": "World leaders should not {resort to violence} to resolve conflicts.",
        "answer": "resort to violence",
        "explanation": "resort to A ʮAʢखஈʣʹૌ͑Δʯ⇦「A の 手 段 に（to）訴 え る（resort）」\n▶ resort には名詞で「行楽地，リゾート地」の意味があるが，この問題文の\nresort は 動 詞 で ，「（手段に）訴える」の意味。\nresort to violence ʮ๫ྗʹૌ͑Δʯ\nresolve a con/f_lict͢Δʯ"
    },
    {
        "id": "1092",
        "ja": "同調圧力にもかかわらず，彼は自分の信念を貫くことを決めた。",
        "en": "He decided to {stick to his principles} despite peer pressure.",
        "answer": "stick to his principles",
        "explanation": "stick to A  ᶃʮA ʹͬͭ͘͘ʯᶄ ʮA͢Δʯ\n⇧「A に（to）く っ つ く（stick）」\nstick to one ’s principles͘ʯ―principleଇɼ৴৚ʯ\npeer pressure ʮಉௐѹྗʯ―peer は「（社会的地位などが）同等の人」の意味。"
    },
    {
        "id": "1093",
        "ja": "彼女はまだ夫が生きているという希望を失ってはいない。",
        "en": "She still {clings to} the hope that her husband is alive.",
        "answer": "clings to",
        "explanation": "cling to A  ᶃʮA͢Δʯᶄ ʮAྗͳͲʣʹ͕͠Έͭ͘ʯ\n⇧「A に（to） 固 執 す る ［ し が み つ く ］（cling）」\nhope that S ′ʴV′ʮ…๬ʯ➡File33– p.120\n▶ この問題文のhope は名詞で「希望」の意味。that は同格のthat。"
    },
    {
        "id": "1094",
        "ja": "私はすぐに新しい留学生が好きになった。",
        "en": "I {took to} our new international student immediately.",
        "answer": "took to",
        "explanation": "take to AʮA͖ʹͳΔʯ⇦「A に 対 し て（to）受 け 入 れ る（take）」\ntake to doingΊΔʯ\nimmediatelyʹʯ＝instantly ＝at once ＝right away"
    },
    {
        "id": "1095",
        "ja": "電車が遅れるかもしれないとは思いもしなかった。",
        "en": "It didn’t occur to me that the train might be late.",
        "answer": "???",
        "explanation": "S occur to AʮS͑ͳͲʣ͕ Aʢਓʣͷ৺ʹු͔Ϳʯ＝S strike A\n⇧「A の 心 に（to）考 え が 起 こ る（occur）」\nIt didn ’t occur to A that …ʮ…ͱ͸A͍΋͠ͳ͔ͬͨʯ―形式主語\nto / proposal / violence / principle / take\n404 405\nSelf\nCheck\n復習"
    },
    {
        "id": "1096",
        "ja": "私たちは変化する天候に適応する必要がある。",
        "en": "We need to adapt (ourselves) to the changing weather conditions.",
        "answer": "???",
        "explanation": "adapt to A ʮA ʹదԠ͢Δʯ＝adapt oneself to A\n⇧「A に（to）適 応 す る（adapt）」\n「A に（to） 自分自身 （oneself ）を 適 合 さ せ る（adapt）」"
    },
    {
        "id": "1098",
        "ja": "私の母は病気の祖母の 世 話 をしている。",
        "en": "My mother has been {looking after} my sick grandmother.",
        "answer": "looking after",
        "explanation": "▶ after は前置詞で， 「～の後」という意味を表す。➡Grasp37\nlook after A ʮA ͷੈ࿩Λ͢Δʯ＝take care of A ＝care for A\n⇧「A の 後（after）を 追 い か け て 見 る（look）」➡Grasp32– p.392"
    },
    {
        "id": "1099",
        "ja": "彼女は本当に母 親 に そっくりだ。",
        "en": "She really {takes after her mother}.",
        "answer": "takes after her mother",
        "explanation": "take after A ʮA͍ͯΔʯ＝resemble A ＝look like A\n⇧「A の 後 に 続 い て（after） 外見や性格などを引き継ぐ （take）」\n父や母など血縁関係がある年長者に似ている場合に使う。進行形にはならない。"
    },
    {
        "id": "1100",
        "ja": "両親は，私の祖父の名をとって私に名前をつけた。",
        "en": "My parents {named me after my grandfather}.",
        "answer": "named me after my grandfather",
        "explanation": "name A after BʮB ͷ໊ΛͱͬͯA ʹ໊લΛ͚ͭΔʯ\n⇧「B の 後 を 追 っ て（after）A に 名 前 を つ け る（name）」\nname A B after CʮC ͷ໊ΛͱͬͯA ΛB ͱ໊෇͚Δʯ\n▼1101～1121ʴfor AʴAʴfor Bʫ"
    },
    {
        "id": "1101",
        "ja": "サラを 探している。彼女を見かけた ？",
        "en": "I’m {looking for Sara. Have you seen her?}",
        "answer": "looking for Sara. Have you seen her?",
        "explanation": "▶ for は方向を表し， 「～のために，～を求めて」などの意味を持つ。➡Grasp38\nlook for A ʮA Λ୳͢ʯ➡Grasp32– p.392\n⇧「A の た め に（for）見 る（look）」"
    },
    {
        "id": "1102",
        "ja": "家族が私の飛行機代 を 出してくれ た。",
        "en": "My family {paid for} my flight.",
        "answer": "paid for",
        "explanation": "pay for A ʮA෷͏ʯ\n⇧「A の た め に（for）支 払う(pay)」\nto / look / take\nGrasp afterのイメージ／withのイメージ37\nafter\n・～の後で\n・～に次いで\n・～を追って\nwith\n・～と共に\n・～と一緒に\n・～と合って\n・～に関して\n・～を使って\nGrasp forのイメージ38\nfor\n・～に向かって\n・～のために\n・～を求めて\n・～の代わりに\n・～の間\n406 407\nSelf\nCheck\n復習"
    },
    {
        "id": "1103",
        "ja": "彼らがその試合に負けた時は，本当に同情した。",
        "en": "I really {felt for them} when they lost that game.",
        "answer": "felt for them",
        "explanation": "feel for A ʮA ʹಉ৘͢Δʯ＝sympathize with A\n⇧「A の ほうへ（for）気 持 ち が 動 く（feel）」"
    },
    {
        "id": "1104",
        "ja": "母は私の祖父の世話をするために，よく実家に帰る。",
        "en": "My mother often goes back to her parents’ house to {care for my}",
        "answer": "care for my",
        "explanation": "grandfather.\ncare for A  ᶃʮA ͷ ੈ ࿩ Λ ͢ Δʢ＝take care of AʣʯᶄʮAΉʢ＝like Aʣʯ\n⇧「A の ほ うを（for）気 に す る（care）」"
    },
    {
        "id": "1105",
        "ja": "昨日のミーティングを欠 席したことについて説 明してくれますか。",
        "en": "Can you {account for} your absence from yesterday’s meeting?",
        "answer": "account for",
        "explanation": "account for A ʮA Λઆ໌͢Δʯ＝explain A\n⇧「A に 対 す る（for）説 明 を す る（account）」\nabsence੮ʯ⇔⇔ attendanceʮग़੮ʯ"
    },
    {
        "id": "1106",
        "ja": "経験不足を補うため，彼は助言を求めた。",
        "en": "He asked for advice to {compensate for} his lack of experience.",
        "answer": "compensate for",
        "explanation": "compensate for A\nᶃʮAΘͤΛ͢Δ ʢ＝make up for Aʣʯ ᶄʮA Λิঈ͢Δʯ\n⇧「A に 対 す る（for） 埋め合わせをする ［補償をする］ （compensate）」\nask for adviceΊΔʯ➡1117\nlack of experienceෆ଍ʯ"
    },
    {
        "id": "1107",
        "ja": "私たちは２か月後の科学コンクールに応募する予定です。",
        "en": "We plan to {apply for} the science competition in two months.",
        "answer": "apply for",
        "explanation": "apply for A ʮAΉɼA ʹԠื͢Δʯ\n⇧「A を 求 め て（for）応 募 す る(apply)」\napply to A ʮA ʹ౰ͯ͸·Δʯ＝be true of [for] A\napply A to BʮA ΛB ʹ౰ͯ͸ΊΔɼA ΛB ʹద༻͢Δʯ\nin ʴ期間ʹʦ ͷ ʧʯ➡741"
    },
    {
        "id": "1108",
        "ja": "人々は平和を切望している。",
        "en": "People {long for peace}.",
        "answer": "long for peace",
        "explanation": "long for A ʮA Λ੾๬͢Δʯ⇦「A を 求 め て（for）長 く（long）待 つ 」\nbe anxious for A ʮA Λ੾ ๬͍ͯ͠Δʯ➡896"
    },
    {
        "id": "1109",
        "ja": "緊急時に，スマート フォ ンは助けを呼ぶのに使える。",
        "en": "In case of emergency, smartphones can be used to {call for help}.",
        "answer": "call for help",
        "explanation": "call for A  ᶃʮA Λ ඞ ཁ ͱ ͢ Δʢ＝need Aʣʯ ᶄʮAΊΔʯ\n⇧「A を 求 め て（for）声 を 上 げ る（call）」\nin case of emergencyʹʯ"
    },
    {
        "id": "1110",
        "ja": "体 調 が 良くないなら，医者に来てもらうよ。",
        "en": "If you’re not feeling well, I’ll {send for a doctor}.",
        "answer": "send for a doctor",
        "explanation": "send for A ʮAʢਓʣʹདྷͯ΋Β͏ʯ＝call A\n⇧「A を 求 め て（for）声 を 送 る（send）」"
    },
    {
        "id": "1111",
        "ja": "発展 彼女は来年の大統領選に立候補するだろう。",
        "en": "She will {run for president} next year.",
        "answer": "run for president",
        "explanation": "run for A ʮAิ͢Δʯ\n⇧ 「地位を求めて （for）走 る（run）」\npresident௕ʯ\nfor / care / account / long / call / send / president\n408 409\nSelf\nCheck\n復習"
    },
    {
        "id": "1112",
        "ja": "",
        "en": "AIは人工知能を意味する。",
        "answer": "???",
        "explanation": ""
    },
    {
        "id": "1112",
        "ja": "",
        "en": "AI {stands for arti/f_icial intelligence}.",
        "answer": "stands for arti/f_icial intelligence",
        "explanation": "stand for A\n͕ʣA Λ ද ͢ʢ＝represent AʣɼA Λ ҙ ຯ ͢ Δʢ＝mean Aʣʯ\n⇧「A の 代 わ り に（for）立 っ て い る（stand）」\nAI / arti/f_icial intelligence஌ೳʯ"
    },
    {
        "id": "1113",
        "ja": "多くの団体が子どもたちの権利を擁護している。",
        "en": "Many organizations {stand up for} children’s rights.",
        "answer": "stand up for",
        "explanation": "stand up for AʮA͢ΔɼA͢Δʯ＝support A ＝stand by A\n⇧「A の た め に（for）立 ち 上 が る（stand up）」\norganization ʮ૊৫ɼஂମʯ"
    },
    {
        "id": "1114",
        "ja": "私たちは最寄りのバス停へ向かった。",
        "en": "We {headed for} the nearest bus stop.",
        "answer": "headed for",
        "explanation": "head for A ʮA͔ ͏ʢ＝make for Aʣʯ\n⇧「A へ（for）向 かう(head)」―head は「向かう」を意味する自動詞｡"
    },
    {
        "id": "1115",
        "ja": "発展 良いコミュニケーションは強い人間関係をもたらす。",
        "en": "Good communication {makes for} strong relationships.",
        "answer": "makes for",
        "explanation": "make for A\nᶃʮA͔ ͏ʢ＝head for AʣʯᶄʮAՌʣΛ ΋ ͨ Β ͢ʢ＝contribute to Aʣ」\n⇧「A の 方 向 へ（for）進 む（make）」\nmake up for A ʮAΘͤΛ͢Δʯ＝compensate for A  ➡966\nrelationshipʯ"
    },
    {
        "id": "1116",
        "ja": "私は来週，フィ リピンへ発つ。",
        "en": "I’m {leaving for} the Philippines next week.",
        "answer": "leaving for",
        "explanation": "leave (A) for BʮB͔ ͬ ͯʢA Λ ʣग़ ൃ ͢ Δ ʯ\n⇧「B に 向 か っ て（for）A を 去 る（leave）」\nthe Philippines ʮϑΟϦϐϯʯ"
    },
    {
        "id": "1117",
        "ja": "助けを求めることを恐れないで。",
        "en": "Don’t be afraid to {ask for help}.",
        "answer": "ask for help",
        "explanation": "ask for A ʮAΊΔʯ＝request A\n⇧「A を 求 め て（for）頼 む（ask）」\nask for helpΊΔʯ"
    },
    {
        "id": "1118",
        "ja": "サラにアドバイスを求めては？",
        "en": "Why don’t you {ask Sara for her advice}?",
        "answer": "ask Sara for her advice",
        "explanation": "ask A for BʮA ʹBΊΔʯ\n⇧「B を 求 め て（for）A に 頼 む（ask）」\nask A for one’s adviceʮAΊΔʯ"
    },
    {
        "id": "1119",
        "ja": "このシャツを大きいサイズのものと交換したいのですが。",
        "en": "I would like to {exchange this shirt for} one in a larger size.",
        "answer": "exchange this shirt for",
        "explanation": "exchange A for BʮA ΛB͢Δʯ\n⇧「B の 代 わ り に（for）A を 交 換 す る（exchange）」\n▶ shirt 「シャツ」の代用と して，代名詞one を使う。"
    },
    {
        "id": "1120",
        "ja": "このレシピで，バターの代わりにマーガリンを使ってもいいですか。",
        "en": "Can I {substitute margarine for} butter in this recipe?",
        "answer": "substitute margarine for",
        "explanation": "substitute A for BʮB ͷ୅ΘΓʹA͏ʯ\n⇧「B の 代 わ り に（for）A を 代 用 す る（substitute）」\nmargarine ʮϚʔΨϦϯʯ\nstand / for / head / make / ask\n410 411\nSelf\nCheck\n復習"
    },
    {
        "id": "1121",
        "ja": "私はカホを彼女の双子の妹のリホと間違えることがある。",
        "en": "I sometimes {mistake [take] Kaho for} her twin sister, Riho.",
        "answer": "mistake [take] Kaho for",
        "explanation": "mistake A for B\ntake A for B    ʮA ΛBҧ͑Δʯ\n⇧「B の 代 わ り に（for）A を間違える （mistake）／A を 取 る（take）」\none’s twin sisterʦຓʧʯ\n▼1122～1126ʴinto AʴAʴinto Bʫ"
    },
    {
        "id": "1122",
        "ja": "委員会がその問題を 調 査している。",
        "en": "The committee is {looking into} the matter.",
        "answer": "looking into",
        "explanation": "▶ into は前置詞で， 「～の中へ」という意味を表す。➡Grasp39\nlook into A ʮA Λௐ΂Δʯ➡Grasp32– p.392 ＝investigate A\n⇧「A の 中 に 入 っ て（into）見 る（look）」\ncommittee ʮҕһձʯ"
    },
    {
        "id": "1123",
        "ja": "駅で中学時代の友達にばったり会った。",
        "en": "I {ran into a friend} from junior high school at the station.",
        "answer": "ran into a friend",
        "explanation": "run into A\nbump into A    ʮAવग़ձ͏ʯ＝run across A ＝come across A\n⇧「 走 っ て（run）A に 突 っ 込 む（into）」\n「 ぶ つ か る（bump）よう に 突 っ 込 む（into）」"
    },
    {
        "id": "1124",
        "ja": "先週，3軒の家が空き巣被害にあった。",
        "en": "Three houses {were broken into} last week.",
        "answer": "were broken into",
        "explanation": "break into A ʮAʢՈɾళͳͲʣʹԡ͠ೖΔʯ\n⇧「 壊 し て（break）A の 中 に（into）入 る 」\n「 壊 れ て（break）A へ と（into）変 わ る 」"
    },
    {
        "id": "1125",
        "ja": "そのコメディ アンのジョークがとてもおかし く て，会場全体が爆笑に包まれた。",
        "en": "The comedian’s jokes were so funny that the entire audience {burst}",
        "answer": "burst",
        "explanation": "into laughter.\nburst into laughter\nburst out laughing     ʹস͍ग़͢ʯ\n⇧ 「破裂して （burst）笑 い（laughter）へ と（into）変 わ る 」\n「破裂して （burst）笑 う こ と（laughing）が 外 に（out）出 る 」\n▶ burst（爆発する） の活用はburst—burst—burst。この文のburst は過去形。\nburst into tears͖ग़͢ʯ\nfunny ʮ͓͔͍͠ɼ͓΋͠Ζ͍ʯ\nentire ʮશମͷʯ⇔⇔ partialʮ෦෼తͳʯ\nfor / look / run / burst\nGrasp intoのイメージ／acrossのイメージ39\ninto\n・～の中へ\n・～に（変化して）\n・～に（ぶつかって）\nacross\n・～を横切って\n412 413\nSelf\nCheck\n復習"
    },
    {
        "id": "1126",
        "ja": "環境への影響を考慮しなければならない。",
        "en": "The environmental impact should {be taken into account}.",
        "answer": "be taken into account",
        "explanation": "take A into account\ntake A into consideration\ntake account of A                       ʮAྀʹೖΕΔʯ\nallow for A\n⇧「考慮 （consideration）／ 勘 定（account）の 中 に（into）A を 取り 込 む（take）」\nenvironmental impactʯ"
    },
    {
        "id": "1127",
        "ja": "図書館で，たまたま危険生物についての興味深い本を見つけた。",
        "en": "In the library, I {came across} an interesting book about dangerous",
        "answer": "came across",
        "explanation": "creatures.\ncome across A       ʮA͚ͭΔɼ\nrun across A     Aવग़ձ͏ ʢ＝run into Aʣʯ\n⇧ 「横切って （across）や っ て 来 る（come）」\n▶ このacross は前置詞で，元々は「～を横切って」という意味を表す。\n➡Grasp39– p.413\ndangerous creatureੜ෺ʯ"
    },
    {
        "id": "1128",
        "ja": "彼は妻の死のショックから立ち直っていない。",
        "en": "He has not {gotten over} the shock of his wife’s death.",
        "answer": "gotten over",
        "explanation": "get over A ʮA෰͢ΔɼA Λ৐Γӽ͑Δʯ\n＝overcome A ＝recover from A\n⇧ 「困難を越えた （over）状 態 に な る（get）」\ndeathʯ⇔⇔ lifeʮੜ໋ʯ"
    },
    {
        "id": "1129",
        "ja": "契約を入念に調べる時間がいく らか必要です。",
        "en": "We’ll need some time to {go over} the contract.",
        "answer": "go over",
        "explanation": "go over A ʮA Λೖ೦ʹௐ΂Δʯ＝examine A ＝review A\n⇧ 「全体を覆って （over）行 く（go）」\nneed some time to do͕͍͘ Β͔ඞཁͩʯ\ncontract໿ॻʯ\n▼ 1130～1135ʴof Aʫ"
    },
    {
        "id": "1130",
        "ja": "その歌手の名前は聞いたこ とがない。人気があるの ？",
        "en": "I’ve never {heard of that singer} before. Is he popular?",
        "answer": "heard of that singer",
        "explanation": "▶ of は前置詞で， 「～の」 （部分・所属） ， 「～について」 （関連・対象） ，\n「～から」 （分離・除去） などの意味を表す。➡Grasp41– p.423\nhear of A ʮAʹ͢ΔɼA ͷ͏Θ͞Λฉ͘ʯ\n⇧「A に つ い て（of）耳 に す る（hear）」\nhear from A ʮA ͔ΒศΓ͕͋ΔɼA ͔Βి࿩Λ΋Β͏ʯ➡1079"
    },
    {
        "id": "1131",
        "ja": "私の両親は，私が友達と遅くまで外出することを認めてくれ な い 。",
        "en": "My parents don’t {approve of} me staying out late with my friends.",
        "answer": "approve of",
        "explanation": "approve of A ʮA Λঝೝ͢Δʯ\n⇧「A に つ い て（of）承 認 す る（approve）」\n⇔ disapprove (of) AʮA੒͠ͳ͍ʯ\n▶ me はstaying の意味上の主語。動名詞の意味上の主語は目的格を使うこと\nが多いが，所有格を使うこと もある。この文ではmy staying となることもある。\napproval੒ʯ\nstay out late ʮ஗͘·Ͱ֎ग़͢Δʯ⇔⇔ come home earlyͬͯ͘Δʯ\naccount / come / get / over / go\n414 415\nSelf\nCheck\n復習"
    },
    {
        "id": "1132",
        "ja": "各国政府はすべての核兵器を廃絶するために協力すべきだ。",
        "en": "Governments should work together to {get rid of} all nuclear",
        "answer": "get rid of",
        "explanation": "weapons.\nget rid of A ʮA ΛऔΓআ͘ʯ\n⇧「A か ら（of）免 れ た（rid）状 態 に す る（get）」\n＝remove A ＝eliminate A ＝abolish A ＝do away with A\nwork together to doΘͤͯʙ͢Δʯ\nnuclear weaponʯ"
    },
    {
        "id": "1133",
        "ja": "廃棄物を適切に処分する必要がある。",
        "en": "We need to {dispose of waste} properly.",
        "answer": "dispose of waste",
        "explanation": "dispose of A ʮA Λॲ෼͢Δʯ⇦「A か ら 分 離 し て（of）配 置 す る（dispose）」\ndisposableͯͷʯ\nwaste  ʮʙΛ࿘අ͢Δʯ\nproperly ʮద੾ʹʯ"
    },
    {
        "id": "1134",
        "ja": "私たちのブラスバンドはおおよそ60名で構成されている。",
        "en": "Our brass band {consists of approximately 60 members}.",
        "answer": "consists of approximately 60 members",
        "explanation": "consist of A ʮA੒͞Ε͍ͯΔʯ\n＝be composed of A ＝be made up of A ＝comprise A\nconsist in AҼɾཧ༝ͳͲ͕ʣAʢͷதʣʹ͋Δʯ＝lie in A\napproximately ʮ͓͓Αͦʯ＝about"
    },
    {
        "id": "1135",
        "ja": "私の祖父は肺がんで亡くなった。",
        "en": "My grandfather {died of [from] lung cancer}.",
        "answer": "died of [from] lung cancer",
        "explanation": "die of A\ndie from A    ʮA͵ʯ―  die because of A とはしない。\n⇧「A が 原 因 で（of/from）死 ぬ（die）」\npass away ʮ๢͘ͳΔʯ➡1031 ―die「死ぬ」の婉曲的な表現。死因を述べる際は\npass away は使わず，die of A / die from A で表現する。\nlung ʮഏʯ\ncancer ʮ͕Μʯ\n▼1136～1141ʴwith Aʫ"
    },
    {
        "id": "1136-1",
        "ja": "その点はあなたに賛成しません。",
        "en": "I don’t {agree with you} there.",
        "answer": "agree with you",
        "explanation": "▶ with は同伴を表す前置詞で， 「～と共に，～と一緒に，～と合って，\n～に関して，～を使って」などの意味を持つ。➡Grasp37– p.406\nagree with A\ngo along with A    ʮA੒͢Δʯ\n⇧「A と 一 致 し て（with）賛 成 す る（agree） 」「A と（with）沿 っ て（along）行 く（go）」\n▶ agree with A はgo along with Aよ り も積極的な賛成を表す。\nagree to Aըʣʹಉҙ͢Δʯ＝consent to A  ➡1088"
    },
    {
        "id": "1136-2",
        "ja": "日々の生活でAIを使う という考えに，私は賛成です。",
        "en": "I {agree with the idea} of using AI in our daily lives.",
        "answer": "agree with the idea",
        "explanation": "▶ 〈agree with＋考え〉 の文。agree with の後には「人」も「考え」も く る。\n時 に 「 提 案 」（proposal な ど ） や 「 計 画 」（plan など） がく ることもある。要するに，\nagree with A のA には「人」も「人以外」も く るが，agree to A のA には\n「人」はこないということを覚えておこう。➡1136-1\nthe idea of doing͑ʯ\nin (our) daily livesͰʯ\nget / of / waste / cancer\n416 417\nSelf\nCheck\n復習"
    },
    {
        "id": "1137",
        "ja": "サラは誰とでもうまくやってい ける。",
        "en": "Sara {gets along with} everyone.",
        "answer": "gets along with",
        "explanation": "get along (with A)ʮʢA ͱ ʣ஥ ྑ ͘΍ ͬ ͯ ͍ ͘ʯ\n⇧「A と（with）沿 っ た（along）状 態 に な る（get）」"
    },
    {
        "id": "1138",
        "ja": "発展 私は子どもの頃のテディ ベアを手放せなかった。",
        "en": "I could not {part with} my childhood teddy bear.",
        "answer": "part with",
        "explanation": "part with A ʮA Λख์͢ʯ\n⇧「 共 に（with）あ るも の を 引 き 離 す（part）」\nbreak with A ʮAผ͢ΔɼA ͱԑΛ੾Δʯ\nchildhoodͷʯ"
    },
    {
        "id": "1139",
        "ja": "私はストレスに対 処 するために音楽を聴く。",
        "en": "I listen to music to {cope with stress}.",
        "answer": "cope with stress",
        "explanation": "cope with A ʮA ʹ͏·͘ରॲ͢Δʯ＝deal with A\n⇧「A に 関 し て（with）う ま く 対 処 す る（cope）」"
    },
    {
        "id": "1140",
        "ja": "私たちはその問題に対処する必要がある。",
        "en": "We need to {deal with the problem}.",
        "answer": "deal with the problem",
        "explanation": "deal with A\nᶃʮA ʹ ର ॲ ͢ Δʢ＝cope with Aʣʯ ᶄʮAฑʣΛ ѻ ͏ʢ＝handle Aʣʯ\n⇧「A に 関 し て（with）扱 う（deal）」deal の活用はdeal—dealt—dealt\ndeal in A ʮAʢ঎඼ʣΛѻ͏ʯ➡1063"
    },
    {
        "id": "1141",
        "ja": "発展 朝食は卵かけご飯で済ませることもある。",
        "en": "Sometimes I {make do with} raw egg over rice for breakfast.",
        "answer": "make do with",
        "explanation": "make do with A ʮAΘͤͷ΋ͷʣͰԿͱ͔͢Δʯ＝manage with A\n⇧「A を 使 っ て（with）す る（do）よう に す る（make）」\nraw egg over rice ʮཛ͔͚͝൧ʯ―raw は「生の」の意味。"
    },
    {
        "id": "1142",
        "ja": "日本の多くの学校は冷房なしではやっていけない。",
        "en": "Many schools in Japan cannot {do without} air conditioning.",
        "answer": "do without",
        "explanation": "do without A\ndispense with A    ʮA·ͤΔʯ\n⇧「A なしで（without）用 が 足 りる（do）」 ― こ のdo については ➡609\n「 共 に（with）あ る べ きも の を な し で 済 ま せ る（dispense）」\n▼ 1143～1144ʴabout Aʫ"
    },
    {
        "id": "1143",
        "ja": "今日の多くの生徒たちは環境に関心を持っ ている。",
        "en": "Many students today {care about the environment}.",
        "answer": "care about the environment",
        "explanation": "▶ about は前置詞で， 「～について，～の辺り」などの意味を表す。\nstudents （of） today で「今日の生徒たち」 。of は省略されることが多い。\ncare about A ʮAʹ͢ΔɼAͭʯ\n⇧「A に つ い て（about）気 に す る（care）」\ncare for A  ᶃʮA ͷ ੈ ࿩ Λ ͢ Δʢ＝take care of Aʣʯ ᶄʮAΉʢ＝like Aʣʯ\n➡1104\nthe environmentʯ"
    },
    {
        "id": "1144",
        "ja": "夕食後にキッチンの掃除に取りかかりましょう。",
        "en": "Let’s {set about cleaning} the kitchen after dinner.",
        "answer": "set about cleaning",
        "explanation": "set about A [doing]\ngo about A [doing]    ʮA ʹʦ ʙ ͢ Δ ͜ ͱ ʹ ʧऔ Γ ͔ ͔ Δ ʯ\n⇧ 「やる事柄の辺り （about）置 く（set）／ 行 く（go）」\n＝start A ＝begin A ＝get down to A\nwith / make / without / set\n418 419\nSelf\nCheck\n復習"
    },
    {
        "id": "1145",
        "ja": "私の家族はつらい時に私の味方になっ て くれる。",
        "en": "My family {stands by me} in hard times.",
        "answer": "stands by me",
        "explanation": "▶ by は前置詞で， 「～のそばに」などの意味を表す。➡Grasp40\nstand by A ʮA͢ΔɼAʢਓʣͷྗʹͳΔʯ\n⇧「A の そ ば に（by）立 つ（stand）」\n＝support A ＝stand up for A\nhard timeʯ"
    },
    {
        "id": "1146",
        "ja": "どうやってこれらのコンサートチケットを手に入れたのですか。",
        "en": "How did you {come by} these concert tickets?",
        "answer": "come by",
        "explanation": "come by A ʮA ΛखʹೖΕΔʯ\n⇧「A の そ ば に（by）人 が 来 る（come）」\n＝obtain A ＝get A\n▼ 1147～1149ʪunderʫ"
    },
    {
        "id": "1147",
        "ja": "新しい市庁舎が建設中だ。",
        "en": "The new City Hall {is under construction}.",
        "answer": "is under construction",
        "explanation": "▶ under は前置詞で， 「～の下に，～下で」という意味を表す。\n➡Grasp40, File106\nbe under constructionઃதͰ͋Δʯ＝be being built\n⇧「 建 設（construction）中（under）で あ る（be）」\nCity Hall໾ॴʯ―市の市役所は１つに特定されているため固有名詞扱いとなり，\nC とH は大文字で表記することが多い。"
    },
    {
        "id": "1148",
        "ja": "文化祭の準備は順調に進んでいる。",
        "en": "Preparations for the school festival are well {under way}.",
        "answer": "under way",
        "explanation": "under way\nunderway     ·͍ͬͯΔʯ\n⇧「 道 の り（way）の 下 に（under）あ る 」\npreparation for A ʮA ͷ४උʯ\nschool festivalʯ"
    },
    {
        "id": "1149",
        "ja": "その森林火災を鎮火するのに 1 週間かかった。",
        "en": "It took a week to bring the forest fires {under control}.",
        "answer": "under control",
        "explanation": "under control഑ԼͰʯ⇦ 「制御 （control）の 下（under）」\n⇔ out of control / out of hand͕͖͔ͳ͍ɼखʹෛ͑ͳ͍ʯ➡1151\nIt takes (A)ʴB（時間）ʴto doʮʢA ͕ ʣʙ ͢ Δ ͷ ʹBʣ͕͔͔Δʯ\nbring A under controlʮAଶͳͲʣΛ཈͑Δʯ\nforest /f_ireʯ＝wild/f_ireʯ\nunder arrestଋ͞Εͯɼୁั͞Εͯʯ　  under pressureʮѹྗΛड͚ͯʯ\nunder attack͞Εͯʯ　  under repairʮम෮தͷʯ\nunder discussion / under considerationதͷʯ\nunder examination౼தͷɼ৹ཧதͷʯ　  under negotiationবதͷʯ\nunder investigationதͷʯ　  under developmentʮ։ൃதͷʯ\nその他の 〈underʴ名詞〉File106\nstand / come\nGrasp byのイメージ／underのイメージ40\nby\n・～のそばに\n・～によって\n・～で［手段］\n・～単位で\nunder\n・～の下に\n・～下で\n・～中の\n420 421\nSelf\nCheck\n復習"
    },
    {
        "id": "1150",
        "ja": "いくつ か のトイレ が故 障していた。",
        "en": "Some of the toilets were {out of order}.",
        "answer": "out of order",
        "explanation": "▶ out of は前置詞と して扱い， 「～の外へ，～を外れて，～を出て」などの意味\nを表す。➡Grasp41\nout of orderো͠ ͯʯ＝broken\n⇧「 秩 序（order）か ら 外 れ て（out of）」\nin order ʮ੔಴͞Εͯʯ"
    },
    {
        "id": "1151",
        "ja": "発展 各地で森林火災が発生し，燃え盛っ て制御不能となった。",
        "en": "Forest fires broke out in many places and raged {out of control}.",
        "answer": "out of control",
        "explanation": "out of control\nout of hand        ͕͖͔ͳ͍ɼखʹෛ͑ͳ͍ʯ\n⇧「 管 理（control）／ 手（hand）か ら 外 れ て（out of）」\n⇔ under control഑ԼͰʯ➡1149\nbreak out͜Δɼຄൃ͢Δʯ\nrage  ࢺ「͏ʯ"
    },
    {
        "id": "1152",
        "ja": "ケンは遅れて到着し，完全に息 を 切らしていた。",
        "en": "Ken arrived late and was completely {out of breath}.",
        "answer": "out of breath",
        "explanation": "out of breath ʮଉΛ੾Βͯ͠ʯ＝short of breath\n⇧「 息（breath）の 外 で（out of）」\narrive late ʮ஗Εͯ౸ண͢Δʯ⇔⇔ arrive earlyʮૣ͘౸ண͢Δʯ\ncompletelyશʹʯ＝totally ＝entirely"
    },
    {
        "id": "1153",
        "ja": "私の携帯電話は古いので，新しいのが必要だ。",
        "en": "My phone is {out of date} and I need a new one.",
        "answer": "out of date",
        "explanation": "out of date\nout of fashion    ͷʯ\n⇧「 現 在 の 日 付（date） ／流行 （fashion）の 外 で（out of）」\n⇔ up to date৽ͷʯ/ in fashion͠ ͯʯ\nbehind the times୅஗Εͷʯ➡1158"
    },
    {
        "id": "1154",
        "ja": "パーティーでは場違いな感じがした。",
        "en": "I felt {out of place} at the party.",
        "answer": "out of place",
        "explanation": "out of place ʮ৔ҧ͍ͳʯ\n⇧「 場 所（place）を 出 て（out of）」\n⇔ in placeʮ͋Δ΂͖৔ॴʹʯ\norder / control / date\nGrasp ofのイメージ／out ofのイメージ41\nof\n・～の\n・～について\n・～から\n［部分］［関連］\n［対象］［分離］\nout of\n・～の外へ\n・～を出て\n・～を外れて\n422 423\nSelf\nCheck\n復習"
    },
    {
        "id": "1155",
        "ja": "学校をサボるなんて論外だ。",
        "en": "Skipping school is {out of the question}.",
        "answer": "out of the question",
        "explanation": "out of the question  ᶃ ʮෆՄೳͳ ʢ＝impossibleʣ ʯᶄ ʮ࿦֎Ͱʯ\n⇧「 問 題（the question）の 外（out of）」\nskip schoolΛαϘΔʯ"
    },
    {
        "id": "1156",
        "ja": "発展 ナオミが突然，私たちの教室に入っ て来た。",
        "en": "Naomi came into our classroom {out of the blue}.",
        "answer": "out of the blue",
        "explanation": "out of the blueͳ͠ʹʯ＝suddenly ＝unexpectedly\n⇧「 何 もな い 青 空（the blue）か ら 不 意 に 雷 が 出 て（out of）くる か の よ う に 」 か ら ，\n「 （予想も していなかったことが） 突然」を意味する。日本の慣用句の「青天\nのへきれき」と同じようなニュアンス。\n▼1157～1158ʪbehindʫ"
    },
    {
        "id": "1157",
        "ja": "私たちは人の陰口をたたくのは悪いことだとわかっている。",
        "en": "We know it is wrong to {talk about people behind their backs}.",
        "answer": "talk about people behind their backs",
        "explanation": "▶ behind は前置詞で， 「～の後ろに，～に遅れて」などの意味を表す。\n➡Grasp42\nbehind one’s backʮʙͷ͍ͳ͍ͱ͜ΖͰʯ\n⇧「 ～ の 背 中（oneʼs back）の 後 ろ で（behind）」\n⇔ to one’s face͔ͬͯʯ\ntalk about A behind one ’s backʮAΛͨͨ͘ʯ"
    },
    {
        "id": "1158",
        "ja": "その考えは少し時代遅れだ。",
        "en": "That idea is a bit {behind the times}.",
        "answer": "behind the times",
        "explanation": "behind the times୅஗Εͷʯ―  behind the time\n⇧「 時 代（the times）に 遅 れ て（behind）」 ＝old-fashioned ＝out of date\nfall behind (A)ʮʢA ʹ ʣ஗ Ε Λ ͱ Δ ʯ\nbehind schedule ʮ༧ఆΑΓ஗Εͯʯ⇔⇔ ahead of scheduleʮ༧ఆΑΓૣ͘ʯ\nout of date ＝out of fashionͷʯ➡1153\na (little) bitʮগ͠ʯ"
    },
    {
        "id": "1159",
        "ja": "その夕焼けの美しさは言葉では言い表せないほどだった。",
        "en": "The beauty of the sunset was {beyond description}.",
        "answer": "beyond description",
        "explanation": "▶ beyond は前置詞で， 「～を超えて」などの意味を表す。➡Grasp42\nbeyond AʮA Λӽ͑ͯʯ\nbeyond description͍දͤͳ͍΄Ͳʯ\n⇧「 描 写（description） する能力を超えて （beyond）」\nsunset  ᶃʮ೔຅ʯ ᶄʮ༦ম͚ʯ⇔⇔ sunriseʮ೔ͷग़ʯ\nbeyond description͍දͤͳ͍΄Ͳʯ\nbeyond recognition෼͚͕͔ͭͳ͍΄Ͳʯ\nbeyond beliefʮ৴͡ΒΕͳ͍΄Ͳʯ\nbeyond repairʮमཧͰ͖ͳ͍΄Ͳʯ\nbeyond one’s controlʮʙʹ͸Ͳ͏͢Δ͜ͱ΋Ͱ͖ͳ͍΄Ͳʯ\nbeyond the reach of AʮA ͷखͷಧ͔ͳ͍ॴʹʯ\nbeyondʴ名詞File107\nout of / question / blue / times / beyond\nGrasp behindのイメージ／beyondのイメージ42\nbehind\n・～の後ろに\n・～に遅れて\nbeyond\n・～を超えて\n・ ～の向こうに\n424 425\nSelf\nCheck\n復習"
    }
];

        // --- App State ---
        let activeSentenceElement = null;
        let selectedSentences = new Set();
        let SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
        let recognition;
        if (SpeechRecognition) {
            recognition = new SpeechRecognition();
            recognition.lang = 'en-US';
            recognition.interimResults = false;
        }
        
        // --- Voice Synthesis Setup ---
        let synthesisVoice = null;

        function setSynthesisVoice() {
            const voices = speechSynthesis.getVoices();
            // 優先順位: Google US English -> Microsoft Zira/David -> その他英語
            synthesisVoice = voices.find(voice => voice.name === 'Google US English') ||
                             voices.find(voice => voice.name.includes('Google') && voice.lang.includes('en-US')) ||
                             voices.find(voice => voice.name.includes('Microsoft') && voice.lang.includes('en-US')) ||
                             voices.find(voice => voice.lang === 'en-US') ||
                             voices.find(voice => voice.lang.startsWith('en'));
        }

        // 音声リストがロードされたら設定を実行
        if (speechSynthesis.onvoiceschanged !== undefined) {
            speechSynthesis.onvoiceschanged = setSynthesisVoice;
        }
        // 初期化時にも実行
        setSynthesisVoice();


        // --- DOM Elements ---
        const sentenceList = document.getElementById('sentence-list');
        const toggleAnswerBtn = document.getElementById('toggle-answer-btn');
        const playSoundBtn = document.getElementById('play-sound-btn');
        const recordBtn = document.getElementById('record-btn');
        const toggleExplanationBtn = document.getElementById('toggle-explanation-btn');
        const startQuizBtn = document.getElementById('start-quiz-btn');
        const messageModal = document.getElementById('message-modal');
        const messageContent = document.getElementById('message-content');
        const quizModal = document.getElementById('quiz-modal');
        const closeQuizBtn = document.getElementById('close-quiz-btn');
        const quizContent = document.getElementById('quiz-content');
        
        const selectAllCheckbox = document.getElementById('select-all-checkbox');
        const pdfModal = document.getElementById('pdf-modal');
        const openPdfModalBtn = document.getElementById('open-pdf-modal-btn');
        const closeModalBtn = document.getElementById('close-modal-btn');


        // --- Functions ---

        /**
         * Parses the English sentence template and creates the HTML structure.
         */
        function formatEnglishSentence(enTemplate, answer) {
            const blank = '__________';
            const answerHtml = `<span class="answer-span">${answer}</span>`;
            const underlineHtml = `<span class="underline-span">${blank}</span>`;
            const formattedSentence = enTemplate.replace(`{${answer}}`, `${answerHtml}${underlineHtml}`);
            return formattedSentence;
        }

        /**
         * Renders all sentences for the chapter.
         */
        function renderChapter() {
            sentenceList.innerHTML = '';
            chapterData.forEach(item => {
                const sentenceDiv = document.createElement('div');
                sentenceDiv.className = 'sentence-item p-4 border border-gray-200 rounded-lg bg-white transition-shadow duration-300 hover:shadow-md cursor-pointer';
                sentenceDiv.dataset.id = item.id;
                sentenceDiv.dataset.fullSentence = item.en.replace(`{${item.answer}}`, item.answer);

                const englishSentenceHtml = formatEnglishSentence(item.en, item.answer);

                sentenceDiv.innerHTML = `
                    <div class="flex items-start space-x-4">
                         <div class="flex items-center pt-1" onclick="event.stopPropagation()">
                            <input type="checkbox" class="sentence-checkbox h-5 w-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500" data-id="${item.id}">
                        </div>
                        <span class="text-lg font-bold text-gray-500 w-10 shrink-0 pt-1">${item.id}</span>
                        <div class="flex-1">
                            <p class="mb-2 text-gray-700">${item.ja}</p>
                            <p class="font-english">${englishSentenceHtml}</p>
                            <div class="explanation mt-4 p-4 bg-yellow-100 border-l-4 border-yellow-400 text-gray-700 rounded-r-lg">
                                ${item.explanation}
                            </div>
                        </div>
                    </div>
                `;
                sentenceList.appendChild(sentenceDiv);
            });
            
            // Add click listener to each sentence item
            document.querySelectorAll('.sentence-item').forEach(item => {
                item.addEventListener('click', (e) => {
                    // Don't select if clicking inside explanation
                    if (e.target.closest('.explanation')) return;
                    if (e.target.closest('.sentence-checkbox')) return; // Checkbox click is handled separately

                    if (activeSentenceElement) {
                        activeSentenceElement.classList.remove('ring-2', 'ring-blue-400', 'shadow-xl');
                    }
                    activeSentenceElement = item;
                    activeSentenceElement.classList.add('ring-2', 'ring-blue-400', 'shadow-xl');
                });
            });

            // Checkbox logic
            document.querySelectorAll('.sentence-checkbox').forEach(checkbox => {
                checkbox.addEventListener('change', (e) => {
                    const id = e.target.dataset.id;
                    if (e.target.checked) {
                        selectedSentences.add(id);
                    } else {
                        selectedSentences.delete(id);
                    }
                });
            });
            
            // Select the first sentence by default
            if (sentenceList.firstChild) {
                 sentenceList.firstChild.click();
            }
        }
        
        // --- PDF / Print Logic ---
        
        function openPrintWindow(bodyContent, title) {
            const htmlContent = `
                <!DOCTYPE html>
                <html lang="ja">
                <head>
                    <meta charset="UTF-8">
                    <title>Insight App - Chapter 24</title>
                    <style>
                        body { font-family: "Hiragino Kaku Gothic ProN", "Meiryo", sans-serif; line-height: 1.8; margin: 25px; color: #333; }
                        @media print { .no-print { display: none; } }
                        h1, h2 { text-align: center; border-bottom: 2px solid #333; padding-bottom: 10px; margin-bottom: 25px; }
                        ol, ul { list-style-position: inside; padding-left: 0; }
                        li { margin-bottom: 15px; }
                        .list-container { 
                            column-count: 2; 
                            column-gap: 40px; 
                        }
                        .list-container li, .list-container p { 
                            -webkit-column-break-inside: avoid; 
                            page-break-inside: avoid; 
                            break-inside: avoid; 
                        }
                        ol li {
                            list-style-type: decimal;
                            margin-left: 1.5em; 
                        }
                        .inline-content {
                            display: inline;
                        }
                        @media (max-width: 700px) { .list-container { column-count: 1; } }
                        .answer-key { page-break-before: always; margin-top: 50px; }
                        u { text-decoration: underline; text-underline-offset: 3px; }
                    </style>
                </head>
                <body>
                    <h1>${title}</h1>
                    <p class="no-print" style="text-align:center; margin-bottom: 20px; font-size: 0.9em; color: #666;">
                        ※印刷ダイアログが表示されない場合は、Ctrl+P (または Cmd+P) を押してください。
                    </p>
                    ${bodyContent}
                </body>
                </html>
            `;
            const printWindow = window.open('', '_blank');
            if (!printWindow) {
                showMessage('<p>ポップアップがブロックされました。設定を確認してください。</p>', 5000);
                return;
            }
            printWindow.document.write(htmlContent);
            printWindow.document.close();
            setTimeout(() => {
                printWindow.focus(); 
                printWindow.print();
            }, 250);
        }

        function getSelectedItems() {
            if (selectedSentences.size === 0) {
                showMessage('<p>PDFを作成する問題を選択してください。</p>', 3000);
                return null;
            }
            // Sort items based on ID
            return Array.from(selectedSentences)
                .map(id => chapterData.find(item => item.id === id))
                .filter(Boolean)
                .sort((a, b) => {
                     // Handle IDs like "1382-1" vs "1382-2"
                     const aParts = a.id.split('-').map(s => parseInt(s) || 0);
                     const bParts = b.id.split('-').map(s => parseInt(s) || 0);
                     if (aParts[0] !== bParts[0]) return aParts[0] - bParts[0];
                     return (aParts[1] || 0) - (bParts[1] || 0);
                });
        }
        
        function getUniqueItems(items) {
             const uniqueMap = new Map();
             items.forEach(item => {
                 // Use answer as key to deduplicate same phrases
                 if (!uniqueMap.has(item.answer)) {
                     uniqueMap.set(item.answer, item);
                 }
             });
             return Array.from(uniqueMap.values()).sort((a, b) => {
                 const aId = parseInt(a.id.split('-')[0]);
                 const bId = parseInt(b.id.split('-')[0]);
                 return aId - bId;
             });
        }


        // --- Message & Sound Functions ---
        
        function showMessage(htmlContent, duration = null) {
            messageContent.innerHTML = htmlContent;
            messageModal.classList.remove('hidden');
            if (duration) {
                setTimeout(() => {
                    messageModal.classList.add('hidden');
                }, duration);
            }
        }

        function playSound() {
            if (!activeSentenceElement) {
                showMessage('<p>文を選択してください。</p>', 2000);
                return;
            }

            // 音声が未設定なら再取得を試みる
            if (!synthesisVoice) {
                setSynthesisVoice();
            }

            // 連続再生を防ぐために一度キャンセル
            speechSynthesis.cancel();
            
            let textToSpeak = activeSentenceElement.dataset.fullSentence;
            // 念のため不要な記号を除去
            textToSpeak = textToSpeak.replace(/[{}]/g, '');

            const utterance = new SpeechSynthesisUtterance(textToSpeak);
            utterance.lang = 'en-US';

            // 英語音声が取得できていれば設定
            if (synthesisVoice) {
                utterance.voice = synthesisVoice;
            }

            utterance.rate = 1.0; 
            utterance.pitch = 1.0;

            speechSynthesis.speak(utterance);
        }

        function handleRecording() {
            if (!activeSentenceElement) {
                showMessage('<p>文を選択してください。</p>', 2000);
                return;
            }
            if (!SpeechRecognition) {
                showMessage('<p>お使いのブラウザは音声認識に対応していません。</p>', 3000);
                return;
            }

            showMessage('<p class="text-2xl">マイクに向かって話してください...</p><div class="animate-pulse text-red-500 text-4xl mt-4">●</div>');
            
            recognition.start();

            recognition.onresult = (event) => {
                const transcript = event.results[0][0].transcript;
                evaluatePronunciation(transcript);
            };

            recognition.onerror = (event) => {
                showMessage(`<p>エラーが発生しました: ${event.error}</p>`, 3000);
            };
            
            recognition.onend = () => {
                 if (messageModal.classList.contains('hidden') === false && messageContent.innerHTML.includes('マイクに')) {
                    messageModal.classList.add('hidden');
                 }
            };
        }
        
        function evaluatePronunciation(transcript) {
            const originalText = activeSentenceElement.dataset.fullSentence;

            const cleanOrig = originalText.toLowerCase().replace(/[^\w\s]/g, '').split(' ');
            const cleanTrans = transcript.toLowerCase().replace(/[^\w\s]/g, '').split(' ');
            
            let matches = 0;
            cleanOrig.forEach(word => {
                if (cleanTrans.includes(word)) {
                    matches++;
                }
            });

            const similarity = matches / cleanOrig.length;
            
            let score;
            if (similarity > 0.9) {
                score = 95 + Math.floor(Math.random() * 5);
            } else if (similarity > 0.7) {
                score = 90 + Math.floor(Math.random() * 6);
            } else if (similarity > 0.5) {
                score = 85 + Math.floor(Math.random() * 5);
            } else if (similarity > 0.3) {
                score = 80 + Math.floor(Math.random() * 5);
            } else {
                score = 70 + Math.floor(Math.random() * 10);
            }
            
            if (score === 100 && Math.random() < 0.3) score = 99;

            const messageHtml = `
                <h3 class="text-2xl font-bold mb-4">評価結果</h3>
                <p class="text-7xl font-bold text-blue-600 mb-4">${score}<span class="text-2xl">点</span></p>
                <p class="text-gray-600 mb-2"><strong>あなたの発音:</strong> ${transcript}</p>
                <p class="text-gray-600"><strong>元の文:</strong> ${originalText}</p>
                <button onclick="document.getElementById('message-modal').classList.add('hidden')" class="mt-6 bg-blue-500 text-white py-2 px-6 rounded-lg">閉じる</button>
            `;
            showMessage(messageHtml);
        }

        // --- Quiz Functions ---

        function startQuiz() {
            if (chapterData.length < 10) {
                 showMessage('<p>クイズを作成するには、文が10個以上必要です。</p>', 3000);
                 return;
            }

            const shuffled = [...chapterData].sort(() => 0.5 - Math.random());
            const questions = shuffled.slice(0, 10);

            let currentQuestionIndex = 0;
            let score = 0;

            function showQuestion() {
                if (currentQuestionIndex >= questions.length) {
                    showQuizResult();
                    return;
                }

                const question = questions[currentQuestionIndex];
                const correctAnswer = question.answer;

                const incorrectAnswers = chapterData
                    .filter(item => item.answer !== correctAnswer)
                    .sort(() => 0.5 - Math.random())
                    .slice(0, 3)
                    .map(item => item.answer);

                const options = [correctAnswer, ...incorrectAnswers].sort(() => 0.5 - Math.random());
                
                const questionSentence = question.en.replace(`{${question.answer}}`, ' (______) ');

                quizContent.innerHTML = `
                    <h3 class="text-2xl font-bold mb-2">問題 ${currentQuestionIndex + 1}/10</h3>
                    <p class="text-lg mb-4">${question.ja}</p>
                    <p class="font-english text-xl mb-6 p-4 bg-gray-100 rounded-lg">${questionSentence}</p>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        ${options.map(opt => `<button class="quiz-option p-4 bg-blue-100 hover:bg-blue-200 rounded-lg text-left text-lg font-english" data-answer="${opt}">${opt}</button>`).join('')}
                    </div>
                `;

                document.querySelectorAll('.quiz-option').forEach(button => {
                    button.addEventListener('click', () => {
                        if (button.dataset.answer === correctAnswer) {
                            score++;
                            button.classList.add('bg-green-400', 'text-white');
                        } else {
                            button.classList.add('bg-red-400', 'text-white');
                            document.querySelector(`.quiz-option[data-answer="${CSS.escape(correctAnswer)}"]`).classList.add('bg-green-400', 'text-white');
                        }
                        
                        setTimeout(() => {
                            currentQuestionIndex++;
                            showQuestion();
                        }, 1200);
                    });
                });
            }

            function showQuizResult() {
                quizContent.innerHTML = `
                    <h3 class="text-3xl font-bold mb-4 text-center">テスト終了！</h3>
                    <p class="text-center text-xl mb-6">あなたのスコアは...</p>
                    <p class="text-center text-7xl font-bold text-purple-600">${score * 10}<span class="text-3xl">点</span></p>
                    <p class="text-center text-xl mt-2">(${questions.length}問中 ${score}問正解)</p>
                `;
            }

            showQuestion();
            quizModal.classList.remove('hidden');
        }


        // --- Event Listeners ---

        toggleAnswerBtn.addEventListener('click', () => {
            if (!activeSentenceElement) {
                showMessage('<p>文を選択してください。</p>', 2000);
                return;
            }
            activeSentenceElement.classList.toggle('show-answer');
        });

        toggleExplanationBtn.addEventListener('click', () => {
            if (!activeSentenceElement) {
                showMessage('<p>文を選択してください。</p>', 2000);
                return;
            }
            const explanationDiv = activeSentenceElement.querySelector('.explanation');
            if (explanationDiv.style.display === 'block') {
                explanationDiv.style.display = 'none';
            } else {
                explanationDiv.style.display = 'block';
            }
        });
        
        playSoundBtn.addEventListener('click', playSound);
        recordBtn.addEventListener('click', handleRecording);
        startQuizBtn.addEventListener('click', startQuiz);
        closeQuizBtn.addEventListener('click', () => quizModal.classList.add('hidden'));
        
        // Select All Logic
        selectAllCheckbox.addEventListener('change', (e) => {
            const isChecked = e.target.checked;
            const checkboxes = document.querySelectorAll('.sentence-checkbox');
            checkboxes.forEach(cb => {
                cb.checked = isChecked;
                if (isChecked) selectedSentences.add(cb.dataset.id);
                else selectedSentences.delete(cb.dataset.id);
            });
        });

        // PDF Modal Logic
        openPdfModalBtn.addEventListener('click', () => {
             if (selectedSentences.size === 0) {
                showMessage('<p>PDFを作成する問題を選択してください。</p>', 3000);
                return;
            }
            pdfModal.classList.remove('hidden');
        });
        closeModalBtn.addEventListener('click', () => pdfModal.classList.add('hidden'));

        // --- PDF Generation Buttons Listeners ---

        // 変更: PDF内のサブタイトルを「Insight 英文法・語法・熟語 ＋ 章とその題」の形式にする
        // h1: "Insight 英文法・語法・熟語"
        // h2: "学習用サイト（28章 その他の重要熟語）" -> "（28章 その他の重要熟語）" の部分を抽出して結合
        const mainTitle = document.querySelector('header h1').innerText;
        const subTitleRaw = document.getElementById('app-subtitle').innerText;
        // "学習用サイト" という文字が含まれていれば削除して整形
        const chapterTitle = subTitleRaw.replace('学習用サイト', '').trim();
        const subtitleText = `${mainTitle} ${chapterTitle}`;

        // 1. 完全なリスト
        document.getElementById('download-list-btn').addEventListener('click', () => {
            const items = getSelectedItems();
            if(!items) return;
            // リスト作成の場合は重複があっても良いが、見やすくするために熟語ベースでユニークにするか、
            // そのままID順で並べるか。ここではID順ですべて表示する。
            
            const listItems = items.map(item => {
                // Remove { } for clean display
                const cleanEn = item.en.replace(/[{}]/g, '');
                return `<li>
                    <span class="inline-content"><strong>${item.answer}</strong>: ${item.explanation.replace(/\n/g, '<br>')}</span><br>
                    <span style="font-size:0.9em; color:#555;">Ex: ${cleanEn} / ${item.ja}</span>
                </li>`;
            }).join('');
            
            openPrintWindow(`<ul class="list-container">${listItems}</ul>`, '重要熟語リスト');
            pdfModal.classList.add('hidden');
        });

        // 2. 英語を解答
        document.getElementById('download-en-quiz-btn').addEventListener('click', () => {
            const items = getUniqueItems(getSelectedItems());
            
            const quizItems = items.map(item => 
                `<li><span class="inline-content">${item.explanation.replace(/\n/g, ' ')} : ____________________</span></li>`
            ).join('');
            const answerItems = items.map(item => 
                `<li><span class="inline-content">${item.answer}</span></li>`
            ).join('');
            
            const body = `<h2>${subtitleText}</h2><ol class="list-container">${quizItems}</ol><div class="answer-key"><h2>解答</h2><ol class="list-container">${answerItems}</ol></div>`;
            openPrintWindow(body, '熟語テスト (英語を解答)');
            pdfModal.classList.add('hidden');
        });

        // 3. 意味を解答
        document.getElementById('download-ja-quiz-btn').addEventListener('click', () => {
            const items = getUniqueItems(getSelectedItems());
            
            const quizItems = items.map(item => 
                `<li><span class="inline-content"><strong>${item.answer}</strong> : ____________________</span></li>`
            ).join('');
            const answerItems = items.map(item => 
                `<li><span class="inline-content">${item.explanation.replace(/\n/g, ' ')}</span></li>`
            ).join('');
            
            const body = `<h2>${subtitleText}</h2><ol class="list-container">${quizItems}</ol><div class="answer-key"><h2>解答</h2><ol class="list-container">${answerItems}</ol></div>`;
            openPrintWindow(body, '熟語テスト (意味を解答)');
            pdfModal.classList.add('hidden');
        });

        // 4. 混合
        document.getElementById('download-mixed-quiz-btn').addEventListener('click', () => {
            const items = getUniqueItems(getSelectedItems());
            let quizItems = '';
            let answerItems = '';
            
            items.forEach(item => {
                if (Math.random() > 0.5) {
                    // 日本語 -> 英語
                    quizItems += `<li><span class="inline-content">${item.explanation.replace(/\n/g, ' ')} : ____________________</span></li>`;
                    answerItems += `<li><span class="inline-content">${item.answer}</span></li>`;
                } else {
                    // 英語 -> 日本語
                    quizItems += `<li><span class="inline-content"><strong>${item.answer}</strong> : ____________________</span></li>`;
                    answerItems += `<li><span class="inline-content">${item.explanation.replace(/\n/g, ' ')}</span></li>`;
                }
            });
            
            const body = `<h2>${subtitleText}</h2><ol class="list-container">${quizItems}</ol><div class="answer-key"><h2>解答</h2><ol class="list-container">${answerItems}</ol></div>`;
            openPrintWindow(body, '熟語テスト (混合)');
            pdfModal.classList.add('hidden');
        });

        // 5. 例文穴埋め
        document.getElementById('download-sentence-quiz-btn').addEventListener('click', () => {
            const items = getSelectedItems(); // 例文問題なので重複（文脈違い）も含める
            
            const quizItems = items.map(item => {
                // Replace {answer} with underscore
                const blankSentence = item.en.replace(`{${item.answer}}`, '____________________');
                return `<li>${blankSentence}<br><span style="font-size:0.9em;">(${item.ja})</span></li>`;
            }).join('');
            
            const answerItems = items.map(item => 
                `<li>${item.answer}</li>`
            ).join('');

            const body = `<h2>${subtitleText}</h2><ol>${quizItems}</ol><div class="answer-key"><h2>解答</h2><ol class="list-container">${answerItems}</ol></div>`;
            openPrintWindow(body, '熟語テスト (例文穴埋め)');
            pdfModal.classList.add('hidden');
        });

        // 6. 例文混合 (穴埋め / 下線部和訳)
        document.getElementById('download-sentence-mixed-quiz-btn').addEventListener('click', () => {
            const items = getSelectedItems();
            let quizItems = '';
            let answerItems = '';
            
            const instruction = '<p style="border:1px solid #ccc; padding:10px; margin-bottom:20px;">指示：空所には適切な語句を補い、下線部がある文は下線部の意味を日本語で答えなさい。</p>';

            items.forEach(item => {
                if (Math.random() > 0.5) {
                    // 穴埋め
                    const blankSentence = item.en.replace(`{${item.answer}}`, '____________________');
                    quizItems += `<li>${blankSentence}<br><span style="font-size:0.9em;">(${item.ja})</span></li>`;
                    answerItems += `<li>${item.answer}</li>`;
                } else {
                    // 下線部和訳 (ここでは熟語の意味を問う形にする)
                    const underlineSentence = item.en.replace(`{${item.answer}}`, `<u>${item.answer}</u>`);
                    quizItems += `<li>${underlineSentence}<br>意味: ____________________</li>`;
                    answerItems += `<li>${item.explanation.split('\n')[0]}</li>`; // 解説の1行目を答えとする
                }
            });

            const body = `<h2>${subtitleText}</h2>${instruction}<ol>${quizItems}</ol><div class="answer-key"><h2>解答</h2><ol class="list-container">${answerItems}</ol></div>`;
            openPrintWindow(body, '熟語テスト (例文混合)');
            pdfModal.classList.add('hidden');
        });


        // --- Initial Load ---
        document.addEventListener('DOMContentLoaded', () => {
            renderChapter();
        });
    </script>
</body>
</html>